<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Pacific Trails Resort, a special lodging company on the California North Coast. Rent Yurts, go hiking, or relax in the heated pool" />
    <title>Pacific Trails Resort</title>
    <!-- Stylesheets -->
    <link rel="stylesheet" href="CSS/main.css" />
    <link rel="stylesheet" href="CSS/responsive-design.css" />
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/878ee0d378.js" crossorigin="anonymous"></script>
</head>

<body>
    <header class="site-header">
        <div class="header-inner">
            <a href="index.html" class="header-brand" aria-label="Pacific Trails Resort home">
                <img src="images/logo.png" alt="Pacific Trails Resort logo" class="header-logo">
                <div class="header-brand-copy">
                    <span class="header-brand-name">Pacific Trails Resort</span>
                    <span class="header-brand-tagline">California North Coast Nature Retreat</span>
                </div>
            </a>
            <nav class="main-nav" aria-label="Primary navigation">
                <ul class="nav-links">
                    <li><a href="index.html"><i class="fa-solid fa-house"></i> Home</a></li>
                    <li><a href="yurts.html"><i class="fa-solid fa-campground"></i> Yurts</a></li>
                    <li><a href="activities.html"><i class="fa-solid fa-person-hiking"></i> Activities</a></li>
                    <li><a href="reservations.html"><i class="fa-solid fa-calendar-check"></i> Reservations</a></li>
                </ul>
                <button id="hamburger" class="hamburger" aria-label="Menu" aria-expanded="false">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </button>
            </nav>
        </div>
    </header>
    <nav id="mobileNav" class="mobile-nav">
        <ul class="mobile-links">
            <li><a href="index.html"><i class="fa-solid fa-house"></i> Home</a></li>
            <li><a href="yurts.html"><i class="fa-solid fa-campground"></i> Yurts</a></li>
            <li><a href="activities.html"><i class="fa-solid fa-person-hiking"></i> Activities</a></li>
            <li><a href="reservations.html"><i class="fa-solid fa-calendar-check"></i> Reservations</a></li>
        </ul>
    </nav>
    <div id="navOverlay" class="nav-overlay"></div>
    
    <main>
        <!-- HERO SECTION -->
        <section class="hero-section">
            <div class="hero-overlay">
                <h2 class="hero-title">Escape to Nature in Luxury</h2>
                <p class="hero-subtitle">Unplug. Relax. Reconnect.</p>
            </div>
        </section>

        <!-- OVERVIEW SECTION -->
        <section class="overview-section">
            <h2>Discover What Awaits You</h2>

            <div class="overview-grid">
                <!-- Left Column -->
                <div class="left-column">
                    <p class="indexP">
                        We offer a special lodging experience on the California North Coast.
                        Relax in serenity with panoramic views of the Pacific Ocean.
                    </p>

                    <!-- Feature Cards -->
                    <section class="features-section">
                        <div class="feature-card">
                            <i class="fa-solid fa-water"></i>
                            <p>Ocean-view Yurts</p>
                            <small>Private decks with panoramic Pacific views.</small>
                        </div>

                        <div class="feature-card">
                            <i class="fa-solid fa-mug-hot"></i>
                            <p>Activities Lodge</p>
                            <small>Relax by the fireplace and explore the gift shop.</small>
                        </div>

                        <div class="feature-card">
                            <i class="fa-solid fa-utensils"></i>
                            <p>Fine Dining</p>
                            <small>Dine nightly at our elegant Overlook Caf√©.</small>
                        </div>

                        <div class="feature-card">
                            <i class="fa-solid fa-hot-tub-person"></i>
                            <p>Heated Pool &amp; Spa</p>
                            <small>Unwind in the warmth of our outdoor whirlpool.</small>
                        </div>

                        <div class="feature-card">
                            <i class="fa-solid fa-person-hiking"></i>
                            <p>Guided Hiking</p>
                            <small>Join expert-led tours through the redwoods.</small>
                        </div>

                        <div class="feature-card">
                            <i class="fa-solid fa-fire"></i>
                            <p>Fireplace Evenings</p>
                            <small>Starlit nights by crackling fire pits.</small>
                        </div>
                    </section>
                </div>
            </div>

            <div class="video-modal-container">
                <button id="openVideoModal" class="watch-video-button">Watch the Resort Experience</button>
            </div>
        </section>
    </main>
    <div id="videoModal" class="modal" role="dialog" aria-modal="true" aria-label="Pacific Trails Resort video">
        <div class="modal-content">
            <button type="button" class="close-button" id="closeVideoModal" aria-label="Close video">&times;</button>
            <video controls preload="metadata" class="modal-video" poster="media/Pacific-Trails-Resort-Promo-Cover.jpg" src="media/PacificTrailsResort-Promo-Video-faststart.mp4">
                <p>Your browser does not support the video tag.
                    <a href="media/PacificTrailsResort-Promo-Video-faststart.mp4">Download the video</a>
                </p>
            </video>
        </div>  
    </div>
    <footer>
        <div class="footer-container">
            <section class="footer-section contact">
                <h4>Contact Us</h4>
                <address class="address-links">
                    Pacific Trails Resort<br>
                    12010 Pacific Trails Road<br>
                    Zephyr, CA 95555<br>
                    <a href="tel:888-555-5555"><i class="fa-solid fa-phone-volume"></i> 888-555-5555</a>
                </address>
            </section>

            <section class="footer-section links">
                <h4>Quick Links</h4>
                <ul class="footer-links">
                    <li><a href="index.html"><i class="fa-solid fa-house"></i> Home</a></li>
                    <li><a href="yurts.html"><i class="fa-solid fa-campground"></i> Yurts</a></li>
                    <li><a href="activities.html"><i class="fa-solid fa-person-hiking"></i> Activities</a></li>
                    <li><a href="reservations.html"><i class="fa-solid fa-calendar-check"></i> Reservations</a></li>
                </ul>
            </section>

            <section class="footer-section">
                <h4>Follow Us</h4>
                <p>Stay connected with us:</p>
                <div class="footer-socials">
                    <a href="https://facebook.com" aria-label="Facebook" class="footer-social facebook"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="https://instagram.com" aria-label="Instagram" class="footer-social instagram"><i class="fa-brands fa-instagram"></i></a>
                    <a href="https://twitter.com" aria-label="X (Twitter)" class="footer-social twitter"><i class="fa-brands fa-x-twitter"></i></a>
                </div>
            </section>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 Pacific Trails Resort</p>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="pacific.js"></script>

    <script>
        const modal = document.getElementById("videoModal");
        const openBtn = document.getElementById("openVideoModal");
        const closeBtn = document.getElementById("closeVideoModal");
        const video = modal.querySelector("video");
        let pendingCanPlayHandler = null;
        const initialVideoSrc = video.getAttribute("src");
        const ua = navigator.userAgent || "";
        const isDesktopSafari = /Safari/i.test(ua) &&
            !/Chrome|Chromium|CriOS|Edg|OPR|OPiOS|FxiOS|Android/i.test(ua) &&
            !/Mobile/i.test(ua);
        let safariDesktopObjectUrl = "";
        let safariDesktopSourcePromise = null;

        const removePendingCanPlayHandler = function() {
            if (pendingCanPlayHandler) {
                video.removeEventListener("canplay", pendingCanPlayHandler);
                pendingCanPlayHandler = null;
            }
        };

        const playVideo = function() {
            const playPromise = video.play();
            if (playPromise && typeof playPromise.catch === "function") {
                playPromise.catch(() => {
                    // If autoplay is blocked, controls remain available for manual play.
                });
            }
        };

        const resetVideoToStart = function() {
            try {
                video.currentTime = 0;
            } catch (error) {
                // Safari desktop can throw if seek happens too early.
            }
        };

        const ensureSafariDesktopPlayableSource = function() {
            if (!isDesktopSafari) {
                return Promise.resolve();
            }

            if (safariDesktopObjectUrl) {
                return Promise.resolve();
            }

            if (safariDesktopSourcePromise) {
                return safariDesktopSourcePromise;
            }

            safariDesktopSourcePromise = fetch(initialVideoSrc, {
                cache: "no-store"
            }).then((response) => {
                if (!response.ok) {
                    throw new Error(`Video fetch failed: ${response.status}`);
                }
                return response.blob();
            }).then((blob) => {
                safariDesktopObjectUrl = URL.createObjectURL(blob);
                video.src = safariDesktopObjectUrl;
            }).catch(() => {
                // Keep the original source if blob fallback fails.
            }).finally(() => {
                safariDesktopSourcePromise = null;
            });

            return safariDesktopSourcePromise;
        };

        const openModal = function() {
            modal.style.display = "flex";
            document.body.style.overflow = "hidden";
            removePendingCanPlayHandler();

            ensureSafariDesktopPlayableSource().finally(() => {
                if (video.readyState >= 2) {
                    resetVideoToStart();
                    playVideo();
                    return;
                }

                pendingCanPlayHandler = function() {
                    pendingCanPlayHandler = null;
                    resetVideoToStart();
                    playVideo();
                };

                video.addEventListener("canplay", pendingCanPlayHandler, {
                    once: true
                });
                video.load();
            });
        };

        const closeModal = function() {
            modal.style.display = "none";
            document.body.style.overflow = "";
            removePendingCanPlayHandler();
            video.pause();
            resetVideoToStart();
        };

        openBtn.addEventListener("click", openModal);
        closeBtn.addEventListener("click", closeModal);

        modal.addEventListener("click", function(event) {
            if (event.target === modal) {
                closeModal();
            }
        });

        window.addEventListener("keydown", function(event) {
            if (event.key === "Escape" && modal.style.display !== "none") {
                closeModal();
            }
        });
    </script>
</body>

</html>
